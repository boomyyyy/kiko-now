---
layout: post
title: "Java 位运算"
description: "移位、位与、或、异或、非"
date: 2017-06-22 17:55:00
tags: [Java]
comments: true
share: true
---

## 概述

* 左移 **<<**
* 右移 **>>**
* 无符号右移 **>>>**
* 位与 **&**
* 位或 **\|**
* 位非 **~**
* 位异或 **^**

> `~` 为一元操作符外，其他的都是二元操作符。

## 移位（左移和右移）

### code

```java
public static void main(String[] args) {
  System.out.println(5 << 2); //result 20
  System.out.println(5 >> 2); //result 1
}
```

###  执行逻辑

1. 将 5 转换为二进制（java int 类型为32位）：00000000000000000000000000000101
2. 左移的逻辑为将二进制结果左移两位，低位补 0：000000000000000000000000000101**00**，右移则将二进制结果右移两位，高位补0，其结果为：**00**000000000000000000000000000001
3. 将二进制结果转换为十进制

## 无符号右移

### code

```java
public static void main(String[] args) {
  System.out.println(5 >>> 2);   //result 1
  System.out.println(-5 >> 2);   //result -2
  System.out.println(-5 >>> 2);  //result 1073741822
}   
```

### 执行逻辑

#### 5>>>2

1. 5 转为二进制：00000000 00000000 00000000 00000101
2. 右移 2 位得到：**00**000000 00000000 00000000 00000001(高位补0)
3. 二进制转换为十进制结果为 1

#### -5>>2

1. 得出 -5 的补码：11111111 11111111 11111111 11111011
2. 右移 2 位得到：**11**111111 11111111 11111111 11111110(高位补1)
3. 将 11111111 11111111 11111111 11111110 转换为原码：10000000 00000000 00000000 00000010
4. 二进制原码转换为十进制：-2

#### -5>>>2

1. 得出 -5 的补码：11111111 11111111 11111111 11111011
2. 右移 2 位得到：**00**111111 11111111 11111111 11111110(高位补0)
3. 当做原码转为十进制：1073741822

## 位与 &

### code

```java
public static void main(String[] args){
 System.out.println(5 & 3); //result 1
 }   
 ```

### 执行逻辑

 ```
 5 = 00000000 00000000 00000000 00000101(2)
 3 = 00000000 00000000 00000000 00000011(2)
 ------------------------------------------
 1 = 00000000 00000000 00000000 00000001(2)
 ```
 
 第一个操作数的的第n位与第二个操作数的第n位如果都是1，那么结果的第n位也为1，否则为0

## 位或 |

### code

```java
public static void main(String[] args){
  System.out.println(5 | 3); //result 7
}   
```

### 执行逻辑

第一个操作数的的第n位与第二个操作数的第n位如果有一个是1，那么结果的第n位也为1，否则为0

## 位异或

### code

```java
public static void main(String[] args){
  System.out.println(5 ^ 3); //result 6
}   
```

### 执行逻辑

第一个操作数的的第n位与第二个操作数的第n位 **相反**，那么结果的第n为也为1，否则为0

## 位非 ~ (一元操作符)

### code

```java
public static void main(String[] args){
  System.out.println(~7); //result -6
}
```

### 执行逻辑

操作数的第n位为1，那么结果的第n位为0，反之。

---

> 二进制原码、反码、补码间转换参考：<a href="/2017-06-17/binary-in-computer/" target="_bank">计算机中的二进制</a>
